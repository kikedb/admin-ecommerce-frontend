<template>
  <div class=\"w-full\">
    <label :for=\"id\" class=\"block mb-2.5 text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider\">{{ label }}</label>
    <div class=\"flex shadow-sm rounded-lg overflow-hidden border-2 border-gray-200 dark:border-gray-600 focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-500\">
      <!-- Currency Select -->
      <div class=\"relative\">
        <button
          @click=\"dropdownOpen = !dropdownOpen\"
          type=\"button\"
          class=\"inline-flex items-center px-3 py-2.5 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white border-r-2 border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none font-semibold text-sm shrink-0 gap-1.5\"
        >
          <svg v-if=\"selectedCurrency === '$'\" class=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"2\" d=\"M8 7V6a1 1 0 0 1 1-1h11a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1h-1M3 18v-7a1 1 0 0 1 1-1h11a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1Zm8-3.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z\"/></svg>
          <svg v-else-if=\"selectedCurrency === 'EUR'\" class=\"w-4 h-4\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9 16.5C13.1421 16.5 16.5 13.1421 16.5 9C16.5 4.85786 13.1421 1.5 9 1.5C4.85786 1.5 1.5 4.85786 1.5 9C1.5 13.1421 4.85786 16.5 9 16.5Z\" fill=\"white\"/><path d=\"M9.00078 4.43494L9.24362 5.18227H10.0294L9.39365 5.64414L9.63649 6.39147L9.00078 5.92957L8.36504 6.39147L8.60788 5.64414L7.97217 5.18227H8.75794L9.00078 4.43494Z\" fill=\"#FFDA44\"/><path d=\"M5.7711 5.77211L6.4713 6.12883L7.02691 5.57324L6.90396 6.34932L7.60412 6.70606L6.82802 6.82899L6.70509 7.60513L6.34834 6.90496L5.57227 7.02792L6.12788 6.4723L5.7711 5.77211Z\" fill=\"#FFDA44\"/><path d=\"M4.43457 9.00005L5.1819 8.75721V7.97144L5.64374 8.60718L6.3911 8.36434L5.92918 9.00005L6.3911 9.63576L5.64374 9.39295L5.1819 10.0287V9.24289L4.43457 9.00005Z\" fill=\"#FFDA44\"/><path d=\"M5.7711 12.2283L6.12785 11.5281L5.57227 10.9724L6.34837 11.0954L6.70506 10.3953L6.82802 11.1714L7.60409 11.2943L6.90401 11.651L7.02691 12.4271L6.4713 11.8715L5.7711 12.2283Z\" fill=\"#FFDA44\"/><path d=\"M9.00078 13.5655L8.75791 12.8181H7.97217L8.60791 12.3563L8.36504 11.609L9.00078 12.0708L9.63649 11.609L9.39365 12.3563L10.0294 12.8181H9.24359L9.00078 13.5655Z\" fill=\"#FFDA44\"/><path d=\"M12.227 12.2283L11.5268 11.8715L10.9712 12.4271L11.0941 11.651L10.394 11.2943L11.1701 11.1714L11.293 10.3953L11.6497 11.0954L12.4258 10.9724L11.8702 11.5281L12.227 12.2283Z\" fill=\"#FFDA44\"/><path d=\"M13.5639 9.00017L12.8166 9.24301V10.0288L12.3547 9.39304L11.6074 9.63588L12.0693 9.00017L11.6074 8.36446L12.3547 8.6073L12.8166 7.97156V8.75736L13.5639 9.00017Z\" fill=\"#FFDA44\"/><path d=\"M12.227 5.77208L11.8702 6.47228L12.4258 7.02789L11.6497 6.9049L11.293 7.60507L11.1701 6.82897L10.394 6.70601L11.0941 6.34929L10.9712 5.57324L11.5268 6.12883L12.227 5.77208Z\" fill=\"#FFDA44\"/></svg>
          <svg v-else class=\"w-4 h-4\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.00012 16.5C13.1423 16.5 16.5002 13.1421 16.5002 9C16.5002 4.85786 13.1423 1.5 9.00012 1.5C4.85792 1.5 1.5 4.85786 1.5 9C1.5 13.1421 4.85792 16.5 9.00012 16.5Z\" fill=\"white\"/><path d=\"M16.5009 8.99956C16.5009 6.02627 14.7705 3.4572 12.2619 2.24414V15.7549C14.7705 14.5419 16.5009 11.9728 16.5009 8.99956Z\" fill=\"#D80027\"/><path d=\"M1.5 8.99955C1.5 11.9728 3.23035 14.5419 5.73897 15.755V2.24414C3.23035 3.4572 1.5 6.02627 1.5 8.99955Z\" fill=\"#D80027\"/></svg>
          {{ selectedCurrency }}
          <svg class=\"w-4 h-4\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m19 9-7 7-7-7\"/></svg>
        </button>

        <!-- Dropdown Menu -->
        <div v-if=\"dropdownOpen\" class=\"absolute top-full left-0 z-10 mt-1 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg w-40\">
          <ul class=\"p-2 text-sm text-gray-700 dark:text-gray-300 font-medium\">
            <li v-for=\"option in currencies\" :key=\"option.value\">\n              <button\n                @click=\"selectCurrency(option.value)\"\n                type=\"button\"\n                class=\"inline-flex items-center w-full p-2 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white rounded-md transition\"\n              >\n                {{ option.label }}\n              </button>\n            </li>\n          </ul>\n        </div>\n      </div>

      <!-- Amount Input -->
n      <input\n        :id=\"id\"\n        :value=\"modelValue\"\n        @input=\"$emit('update:modelValue', parseFloat($event.target.value) || '')\"\n        type=\"number\"\n        class=\"block w-full px-4 py-2.5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none border-0 placeholder:text-gray-400 dark:placeholder:text-gray-500\"\n        :placeholder=\"placeholder\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\n\ndefineProps({\n  id: String,\n  label: String,\n  placeholder: String,\n  modelValue: Number\n})\n\ndefineEmits(['update:modelValue', 'update:currency'])\n\nconst dropdownOpen = ref(false)\nconst selectedCurrency = ref('$')\n\nconst currencies = [\n  { value: '$', label: '$ CLP' },\n  { value: 'USD', label: 'USD' },\n  { value: 'EUR', label: 'EUR' },\n  { value: 'CAD', label: 'CAD' }\n]\n\nconst selectCurrency = (currency) => {\n  selectedCurrency.value = currency\n  dropdownOpen.value = false\n}\n</script>\n"